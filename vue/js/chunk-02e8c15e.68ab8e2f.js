(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-02e8c15e"],{4783:function(e,t,_){"use strict";var a=_("8536"),i=_.n(a);i.a},8536:function(e,t,_){},8947:function(e,t,_){"use strict";_.r(t);var a=function(){var e=this,t=e.$createElement,_=e._self._c||t;return _("div",{staticClass:"div"},[e._l(e.uploadList,function(t){return _("div",{staticClass:"demo-upload-list"},["finished"===t.status?[_("img",{attrs:{src:t.url}}),_("div",{staticClass:"demo-upload-list-cover"},[_("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(_){return e.handleView(t.name)}}}),_("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(_){return e.handleRemove(t)}}})],1)]:[t.showProgress?_("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),_("Upload",{ref:"handleUpload",staticStyle:{display:"inline-block",width:"100px"},attrs:{data:e.data,"on-success":e.handleSuccess,"before-upload":e.handleBeforeUpload,"show-upload-list":!1,format:["jpg","jpeg","png","gif"],"max-size":8192,"on-exceeded-size":e.handleMaxSize,"on-format-error":e.handleFormatError,name:"file",type:"drag",action:"/api/upload"}},[_("div",{staticStyle:{width:"100px",height:"58px","line-height":"58px"}},[_("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),_("div",[e.visible?_("img",{staticStyle:{"margin-left":"25%",width:"30%"},attrs:{src:"/api/images/"+e.imgName}}):e._e()]),_("Button",{staticStyle:{"margin-top":"10px","margin-left":"-3px",width:"100px"},attrs:{type:"primary"},on:{click:e.changeavatar}},[e._v("保存")]),_("Button",{staticStyle:{"margin-top":"10px","margin-left":"8px",width:"100px"},on:{click:e.cancel}},[e._v("返回")])],2)},i=[],s=_("f2cb"),r=s["a"],n=(_("4783"),_("2877")),o=Object(n["a"])(r,a,i,!1,null,"28e4f6ce",null);t["default"]=o.exports},f2cb:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__),_libs_crypto__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e0ac"),_libs_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b1d0"),_libs_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("c276"),_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4360");__webpack_exports__["a"]={data:function(){return{imgName:"",visible:!1,token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_4__["i"])(),data:{token:""},uploadList:[]}},methods:{handleView:function(e){this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function handleSuccess(res,file){this.$Notice.success({title:"上传成功",desc:"图片上传成功"}),res=eval("("+res+")"),file.url=res.data.split("/")[3],file.name=res.data.split("/")[3],this.imgName=res.data.split("/")[3],this.visible=!0},handleFormatError:function(e){this.$Notice.warning({title:"上传文件格式错误",desc:"文件格式"+e.name+" 错误,请重新上传,支持的文件格式为"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"File  "+e.name+" 文件太大,请不要超过8M"})},handleBeforeUpload:function(e){this.uploadList.length>=1?this.$Message.info("最多只能上传1个文件"):this.uploadList.push(e)},handleUpload:function(){},changeavatar:function changeavatar(){var _this=this,data={imagename:this.imgName,token:this.token.trim()};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_3__["a"].post("/api/changeavatar",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1000":_this.$Notice.success({title:"修改头像成功",desc:res.data.message}),_store__WEBPACK_IMPORTED_MODULE_5__["a"].commit("setAvatar","/api/images/"+_this.imgName),setTimeout(function(){_this.$router.push({path:"/home"})},2e3);break;case"Z1001":_this.$Notice.error({title:"修改头像失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1002":_this.$Notice.error({title:"修改头像失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1004":_this.$Notice.error({title:"修改头像失败",desc:"认证失败,请稍后再次尝试"});break;default:break}})},cancel:function(){var e=this;setTimeout(function(){e.$router.push({path:"/home"})},1e3)}},mounted:function(){this.data.token=this.token}}}}]);